Console.WriteLine(File.ReadAllLines("input.txt").Select(j => j.Split(" ").ToList().Select(t => int.Parse(t)).ToList()).Select(j => Enumerable.Range(0, j.Count).Select(del => j.Where((x, index) => index != del).ToList()).SelectMany(j => new List<List<int>>(){j, j.Select(x => -x).ToList()})).Count(j => j.Any(x => Enumerable.Range(0, x.Count-1).All(t => x[t] < x[t+1] && x[t+1] - x[t] <= 3))));